
/**
* **ACKNOWLEDGEMENTS:**
* https://appleid.cdn-apple.com/appleauth/static/jsapi/acknowledgements.txt
* 
*/

window.idmsapis=function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:a})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&'object'==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,'default',{enumerable:!0,value:e}),2&i&&'string'!=typeof e)for(var n in e)t.d(a,n,function(t){return e[t]}.bind(null,n));return a},t.n=function(e){var i=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(i,'a',i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=59)}([function(e){var t=Array.isArray;e.exports=t},function(e,t,i){var a=i(9),n=a(Object,'create');e.exports=n},function(e,t,i){var a=i(41);e.exports=function(e,t){for(var i=e.length;i--;)if(a(e[i][0],t))return i;return-1}},function(e,t,i){var a=i(47);e.exports=function(e,t){var i=e.__data__;return a(t)?i['string'==typeof t?'string':'hash']:i.map}},function(e,t,i){var a=i(5),n=i(8);e.exports=function(e){return'symbol'==typeof e||n(e)&&a(e)=='[object Symbol]'}},function(e,t,i){function a(e){return null==e?void 0===e?d:s:c&&c in Object(e)?o(e):r(e)}var n=i(6),o=i(19),r=i(20),s='[object Null]',d='[object Undefined]',c=n?n.toStringTag:void 0;e.exports=a},function(e,t,i){var a=i(7),n=a.Symbol;e.exports=n},function(e,t,i){var a=i(17),n='object'==typeof self&&self&&self.Object===Object&&self,o=a||n||Function('return this')();e.exports=o},function(e){e.exports=function(e){return null!=e&&'object'==typeof e}},function(e,t,i){var a=i(28),n=i(33);e.exports=function(e,t){var i=n(e,t);return a(i)?i:void 0}},function(e){e.exports=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e,t,i){var a,n;(function(o,r){e.exports?e.exports=r():(a=r,n='function'==typeof a?a.call(t,i,t,e):a,!(n!==void 0&&(e.exports=n)))})(this,function(){'use strict';function e(e,t){var i,a=document.createElement(e||'div');for(i in t)a[i]=t[i];return a}function t(e){for(var t=1,i=arguments.length;t<i;t++)e.appendChild(arguments[t]);return e}function a(e,t,a,i){var n=['opacity',t,~~(100*e),a,i].join('-'),o=.01+100*(a/i),r=u(1-(1-e)/t*(100-o),e),s=c.substring(0,c.indexOf('Animation')).toLowerCase();return f[n]||(l.insertRule('@'+(s&&'-'+s+'-'||'')+'keyframes '+n+'{0%{opacity:'+r+'}'+o+'%{opacity:'+e+'}'+(o+.01)+'%{opacity:1}'+(o+t)%100+'%{opacity:'+e+'}100%{opacity:'+r+'}}',l.cssRules.length),f[n]=1),n}function i(e,t){var a,n,i=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==i[t])return t;for(n=0;n<p.length;n++)if(a=p[n]+t,void 0!==i[a])return a}function n(e,t){for(var a in t)e.style[i(e,a)||a]=t[a];return e}function r(e){for(var t,a=1;a<arguments.length;a++)for(var i in t=arguments[a],t)void 0===e[i]&&(e[i]=t[i]);return e}function s(e,t){return'string'==typeof e?e:e[t%e.length]}function d(e){this.opts=r(e||{},d.defaults,m)}function o(){function a(t,i){return e('<'+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}l.addRule('.spin-vml','behavior:url(#default#VML)'),d.prototype.lines=function(e,d){function o(){return n(a('group',{coordsize:i+' '+i,coordorigin:-u+' '+-u}),{width:i,height:i})}function c(e,i,c){t(f,t(n(o(),{rotation:360/d.lines*e+'deg',left:~~i}),t(n(a('roundrect',{arcsize:d.corners}),{width:u,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:c}),a('fill',{color:s(d.color,e),opacity:d.opacity}),a('stroke',{opacity:0}))))}var l,u=d.scale*(d.length+d.width),i=2*d.scale*u,p=2*(-(d.width+d.length)*d.scale)+'px',f=n(o(),{position:'absolute',top:p,left:p});if(d.shadow)for(l=1;l<=d.lines;l++)c(l,-2,'progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)');for(l=1;l<=d.lines;l++)c(l);return t(e,f)},d.prototype.opacity=function(e,t,i,a){var n=e.firstChild;a=a.shadow&&a.lines||0,n&&t+a<n.childNodes.length&&(n=n.childNodes[t+a],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=i))}}var c,l,u=Math.max,p=['webkit','Moz','ms','O'],f={},m={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:'#000',opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',shadow:!1,hwaccel:!1,position:'absolute'};if(d.defaults={},r(d.prototype,{spin:function(t){this.stop();var a=this,r=a.opts,o=a.el=e(null,{className:r.className});if(n(o,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute('role','progressbar'),a.lines(o,a.opts),!c){var s,d=0,i=(r.lines-1)*(1-r.direction)/2,l=r.fps,p=l/r.speed,f=(1-r.opacity)/(p*r.trail/100),m=p/r.lines;(function e(){d++;for(var t=0;t<r.lines;t++)s=u(1-(d+(r.lines-t)*m)%p*f,r.opacity),a.opacity(o,t*r.direction+i,s,r);a.timeout=a.el&&setTimeout(e,~~(1e3/l))})()}return a},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,d){function o(t,i){return n(e(),{position:'absolute',width:d.scale*(d.length+d.width)+'px',height:d.scale*d.width+'px',background:t,boxShadow:i,transformOrigin:'left',transform:'rotate('+~~(360/d.lines*u+d.rotate)+'deg) translate('+d.scale*d.radius+'px,0)',borderRadius:(d.corners*d.scale*d.width>>1)+'px'})}for(var l,u=0,i=(d.lines-1)*(1-d.direction)/2;u<d.lines;u++)l=n(e(),{position:'absolute',top:1+~(d.scale*d.width/2)+'px',transform:d.hwaccel?'translate3d(0,0,0)':'',opacity:d.opacity,animation:c&&a(d.opacity,d.trail,i+u*d.direction,d.lines)+' '+1/d.speed+'s linear infinite'}),d.shadow&&t(l,n(o('#000','0 0 4px #000'),{top:'2px'})),t(r,t(l,o(s(d.color,u),'0 0 1px rgba(0,0,0,.1)')));return r},opacity:function(e,t,i){t<e.childNodes.length&&(e.childNodes[t].style.opacity=i)}}),'undefined'!=typeof document){l=function(){var i=e('style',{type:'text/css'});return t(document.getElementsByTagName('head')[0],i),i.sheet||i.styleSheet}();var g=n(e('group'),{behavior:'url(#default#VML)'});!i(g,'transform')&&g.adj?o():c=i(g,'animation')}return d})},function(e,t,i){var a=i(13),n=i(14);e.exports=function(e,t){return null!=e&&n(e,t,a)}},function(e){var t=Object.prototype,i=t.hasOwnProperty;e.exports=function(e,t){return null!=e&&i.call(e,t)}},function(e,t,i){var a=i(15),n=i(54),o=i(0),r=i(56),s=i(57),d=i(58);e.exports=function(e,t,i){t=a(t,e);for(var c,l=-1,u=t.length,p=!1;++l<u&&(c=d(t[l]),!!(p=null!=e&&i(e,c)));)e=e[c];return p||++l!=u?p:(u=null==e?0:e.length,!!u&&s(u)&&r(c,u)&&(o(e)||n(e)))}},function(e,t,i){var a=i(0),n=i(16),o=i(21),r=i(51);e.exports=function(e,t){return a(e)?e:n(e,t)?[e]:o(r(e))}},function(e,t,i){function a(e,t){if(n(e))return!1;var i=typeof e;return!!('number'==i||'symbol'==i||'boolean'==i||null==e||o(e))||s.test(e)||!r.test(e)||null!=t&&e in Object(t)}var n=i(0),o=i(4),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=a},function(e,t,i){(function(t){var i='object'==typeof t&&t&&t.Object===Object&&t;e.exports=i}).call(this,i(18))},function(e){var t=function(){return this}();try{t=t||new Function('return this')()}catch(i){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,i){var a=i(6),n=Object.prototype,o=n.hasOwnProperty,r=n.toString,s=a?a.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),i=e[s];try{e[s]=void 0}catch(t){}var a=r.call(e);return t?e[s]=i:delete e[s],a}},function(e){var t=Object.prototype,i=t.toString;e.exports=function(e){return i.call(e)}},function(e,t,i){var a=i(22),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,r=a(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(''),e.replace(n,function(e,i,a,n){t.push(a?n.replace(o,'$1'):i||e)}),t});e.exports=r},function(e,t,i){var a=i(23);e.exports=function(e){var t=a(e,function(e){return i.size===500&&i.clear(),e}),i=t.cache;return t}},function(e,t,i){function a(e,t){if('function'!=typeof e||null!=t&&'function'!=typeof t)throw new TypeError(o);var i=function(){var a=arguments,n=t?t.apply(this,a):a[0],o=i.cache;if(o.has(n))return o.get(n);var r=e.apply(this,a);return i.cache=o.set(n,r)||o,r};return i.cache=new(a.Cache||n),i}var n=i(24),o='Expected a function';a.Cache=n,e.exports=a},function(e,t,i){function a(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}var n=i(25),o=i(46),r=i(48),s=i(49),d=i(50);a.prototype.clear=n,a.prototype['delete']=o,a.prototype.get=r,a.prototype.has=s,a.prototype.set=d,e.exports=a},function(e,t,i){var a=i(26),n=i(38),o=i(45);e.exports=function(){this.size=0,this.__data__={hash:new a,map:new(o||n),string:new a}}},function(e,t,i){function a(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}var n=i(27),o=i(34),r=i(35),s=i(36),d=i(37);a.prototype.clear=n,a.prototype['delete']=o,a.prototype.get=r,a.prototype.has=s,a.prototype.set=d,e.exports=a},function(e,t,i){var a=i(1);e.exports=function(){this.__data__=a?a(null):{},this.size=0}},function(e,t,i){var a=i(29),n=i(30),o=i(10),r=i(32),s=/[\\^$.*+?()[\]{}|]/g,d=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,p=l.hasOwnProperty,f=RegExp('^'+u.call(p).replace(s,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');e.exports=function(e){if(!o(e)||n(e))return!1;var t=a(e)?f:d;return t.test(r(e))}},function(e,t,i){var a=i(5),n=i(10);e.exports=function(e){if(!n(e))return!1;var t=a(e);return t=='[object Function]'||t=='[object GeneratorFunction]'||t=='[object AsyncFunction]'||t=='[object Proxy]'}},function(e,t,i){function a(e){return!!o&&o in e}var n=i(31),o=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||'');return e?'Symbol(src)_1.'+e:''}();e.exports=a},function(e,t,i){var a=i(7),n=a['__core-js_shared__'];e.exports=n},function(e){var t=Function.prototype,i=t.toString;e.exports=function(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+''}catch(t){}}return''}},function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,i){var a=i(1),n=Object.prototype,o=n.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(a){var i=t[e];return i==='__lodash_hash_undefined__'?void 0:i}return o.call(t,e)?t[e]:void 0}},function(e,t,i){var a=i(1),n=Object.prototype,o=n.hasOwnProperty;e.exports=function(e){var t=this.__data__;return a?t[e]!==void 0:o.call(t,e)}},function(e,t,i){var a=i(1);e.exports=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=a&&void 0===t?'__lodash_hash_undefined__':t,this}},function(e,t,i){function a(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var a=e[t];this.set(a[0],a[1])}}var n=i(39),o=i(40),r=i(42),s=i(43),d=i(44);a.prototype.clear=n,a.prototype['delete']=o,a.prototype.get=r,a.prototype.has=s,a.prototype.set=d,e.exports=a},function(e){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,i){var a=i(2),n=Array.prototype,o=n.splice;e.exports=function(e){var t=this.__data__,i=a(t,e);if(0>i)return!1;var n=t.length-1;return i==n?t.pop():o.call(t,i,1),--this.size,!0}},function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,i){var a=i(2);e.exports=function(e){var t=this.__data__,i=a(t,e);return 0>i?void 0:t[i][1]}},function(e,t,i){var a=i(2);e.exports=function(e){return-1<a(this.__data__,e)}},function(e,t,i){var a=i(2);e.exports=function(e,t){var i=this.__data__,n=a(i,e);return 0>n?(++this.size,i.push([e,t])):i[n][1]=t,this}},function(e,t,i){var a=i(9),n=i(7),o=a(n,'Map');e.exports=o},function(e,t,i){var a=i(3);e.exports=function(e){var t=a(this,e)['delete'](e);return this.size-=t?1:0,t}},function(e){e.exports=function(e){var t=typeof e;return'string'==t||'number'==t||'symbol'==t||'boolean'==t?'__proto__'!==e:null===e}},function(e,t,i){var a=i(3);e.exports=function(e){return a(this,e).get(e)}},function(e,t,i){var a=i(3);e.exports=function(e){return a(this,e).has(e)}},function(e,t,i){var a=i(3);e.exports=function(e,t){var i=a(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}},function(e,t,i){var a=i(52);e.exports=function(e){return null==e?'':a(e)}},function(e,t,i){function a(e){if('string'==typeof e)return e;if(r(e))return o(e,a)+'';if(s(e))return l?l.call(e):'';var t=e+'';return'0'==t&&1/e==-d?'-0':t}var n=i(6),o=i(53),r=i(0),s=i(4),d=1/0,c=n?n.prototype:void 0,l=c?c.toString:void 0;e.exports=a},function(e){e.exports=function(e,t){for(var i=-1,a=null==e?0:e.length,n=Array(a);++i<a;)n[i]=t(e[i],i,e);return n}},function(e,t,i){var a=i(55),n=i(8),o=Object.prototype,r=o.hasOwnProperty,s=o.propertyIsEnumerable,d=a(function(){return arguments}())?a:function(e){return n(e)&&r.call(e,'callee')&&!s.call(e,'callee')};e.exports=d},function(e,t,i){var a=i(5),n=i(8);e.exports=function(e){return n(e)&&a(e)=='[object Arguments]'}},function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,i){var a=typeof e;return i=null==i?9007199254740991:i,!!i&&('number'==a||'symbol'!=a&&t.test(e))&&-1<e&&0==e%1&&e<i}},function(e){e.exports=function(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}},function(e,t,i){var a=i(4);e.exports=function(e){if('string'==typeof e||a(e))return e;var t=e+'';return'0'==t&&1/e==-(1/0)?'-0':t}},function(e,t,i){'use strict';function a(e){return a='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},a(e)}i.r(t);var n=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){t.push(e)}):t.push(e),t},o={getOriginFromUrl:function(e){if(!e)throw new TypeError('Invalid url',e);var t=document.implementation.createHTMLDocument(''),i=t.createElement('a');if(i.href=e,t.body.appendChild(i),':'===i.protocol||!/:/.test(i.href))throw new TypeError('Invalid URL');return i.protocol+'//'+i.host},setupACL:function(e){var t=n(e);return{whitelist:t,blacklist:[]}},checkDestinationDomain:function(e,t){if('undefined'!=typeof e&&null!==e&&'undefined'!=typeof e.destinationDomain)for(var a=0;a<e.destinationDomain.length;++a)if(t===e.destinationDomain[a])return!0;return!1},checkACL:function(e,t,a){var n=e.whitelist,o=e.blacklist,r=!1,s=!1;if(a&&{getRegisteredProcedures:!0,receivePingRequest:!0}[a])return!0;for(var d=0;d<n.length;++d)if(t===n[d]){r=!0;break}for(var i=0;i<o.length;++i)if(t===n[d]){s=!0;break}return r&&!s}},r=function(){function e(){return'object'===a(window.crypto)&&'function'==typeof window.crypto.getRandomValues&&'function'==typeof Uint32Array?window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296:Math.random()}function t(){for(var t=Math.floor,a=[],n='89AB',o=0;36>o;o++)a[o]='0123456789ABCDEF'[t(16*e())];return a[14]='4',a[19]=n[t(4*e())],a[8]=a[13]=a[18]=a[23]='-',a.join('')}function i(e){e.trim()&&(S=e+'.')}function n(e,t,a,n){if(!(a instanceof Array)){var o=e.toString(),r=o.substring(o.indexOf('(')+1,o.indexOf(')'));r=''===r?[]:r.split(', ');for(var s={},d=0;d<r.length;d++)s[r[d]]=d;var i=[];for(var c in a)if('undefined'!=typeof s[c])i[s[c]]=a[c];else throw'No such param: '+c;a=i}return'undefined'!=typeof n&&(a=a.concat(n)),e.apply(t,a)}function r(e){return S+JSON.stringify(e)}function s(e){return JSON.parse(e.substring(S.length))}function d(){return{jsonrpc:'2.0'}}function c(e,t,i){var a=d();return a.method=e,a.params=t,'undefined'!=typeof i&&(a.id=i),a}function l(e,t,i){return{code:e,message:t,data:i}}function u(e,t,i){var a=d();return a.id=i,'undefined'==typeof e||null===e?a.result='undefined'===t?null:t:a.error=e,a}function p(e){return!(e.publicProcedureName in C)&&(L[e.publicProcedureName]={publicProcedureName:e.publicProcedureName,procedure:e.procedure,context:e.procedure.context,isAsync:'undefined'!=typeof e.isAsynchronous&&e.isAsynchronous,acl:'undefined'==typeof e.acl?{whitelist:['(.*)'],blacklist:[]}:e.acl},!0)}function f(e){return!(e in C)&&(delete L[e],!0)}function m(e){return L[e]}function g(e){var t=e.event;if(t&&t.data&&'string'==typeof t.data&&0===t.data.indexOf(S)){var i=s(t.data),a={data:t.data,source:t.source,origin:t.origin,shouldCheckACL:!0};if('undefined'!=typeof i.method){v.push({a:new Date().getTime(),b:i.id,c:'rR',h:i.method,e:'f1:mR'});var n=h(i,a);null!==n&&k(a.source,n,a.origin,{callId:i.id,logType:'res',publicProcedureName:i.method,calledAt:'f1:f4'})}else b(i,a)}}function h(e,t){if('2.0'!==e.jsonrpc)return u(l(-32600,'Invalid request.','The recived JSON is not a valid JSON-RPC 2.0 request.'),null,null);var i=e.id,a=m(e.method);if('undefined'==typeof a)return'undefined'==typeof i?null:u(l(-32601,'Method not found.','The requested remote procedure does not exist or is not available.'),null,i);if(!t.shouldCheckACL||o.checkACL(a.acl,t.origin,a.publicProcedureName))try{if(a.isAsync){var r=function(e){k(t.source,u(null,e,i),t.origin)},s=function(e){k(t.source,u(l(-1,'Application error.',e.message),null,i),t.origin)};return n(a.procedure,a.context,e.params,[r,s,t]),null}var d=n(a.procedure,a.context,e.params,[t]);return'undefined'==typeof i?null:u(null,d,i)}catch(e){return'undefined'==typeof i?null:e.match('^(No such param)')?u(l(-32602,'Invalid params.',e.message),null,i):u(l(-1,'Application error.',e.message),null,i)}else return'undefined'==typeof i?null:u(l(-2,'Application error.','Access denied on server.'),null,i)}function b(e,t){var i=e.id,a=R[i],n={receivePingRequest:'rPR',getRegisteredProcedures:'gRP',ready:'r',config:'i'},r=new Date().getTime(),s={a:r,b:'',c:'rRE',f:'nPN',e:'f2:uRFRpcC'};if('undefined'==typeof a||null===a)return void v.push(s);if(delete R[i],!o.checkDestinationDomain(a,t.origin))return s.e='f2:cAF',void v.push(s);if('undefined'==typeof e.error){var d={destination:a.destination,publicProcedureName:a.publicProcedureName,params:a.params,status:'success',namespace:S,returnValue:e.result};v.push({a:r,b:a.callId,c:'rRS',h:n[a.publicProcedureName]?n[a.publicProcedureName]:a.publicProcedureName,e:'f2:rRS'}),a.onSuccess(d)}else{var c={destination:a.destination,publicProcedureName:a.publicProcedureName,params:a.params,status:'error',namespace:S,message:e.error.message+' '+e.error.data};N(c),v.push({a:r,b:a.callId,c:'rRE',f:c.message,h:n[a.publicProcedureName]?n[a.publicProcedureName]:a.publicProcedureName,e:'f2:rRE'}),a.onError(c)}}function y(e){if(e.retries&&0>e.retries)throw new Exception('number of retries must be 0 or higher');var a=[];if('undefined'==typeof e.destination||null===e.destination||'workerParent'===e.destination)a=[{context:null,type:'workerParent'}];else if('publish'===e.destination)a=P();else if(e.destination instanceof Array)for(var n=0;n<e.destination.length;n++)'workerParent'===e.destination[n]?a.push({context:null,type:'workerParent'}):'undefined'==typeof e.destination[n].frames?a.push({context:e.destination[n],type:'worker'}):a.push({context:e.destination[n],type:'window'});else'undefined'==typeof e.destination.frames?a.push({context:e.destination,type:'worker'}):a.push({context:e.destination,type:'window'});for(var n=0;n<a.length;n++){var i={destination:a[n].context,destinationDomain:'undefined'==typeof e.destinationDomain?['*']:'string'==typeof e.destinationDomain?[e.destinationDomain]:e.destinationDomain,publicProcedureName:e.publicProcedureName,onSuccess:'undefined'==typeof e.onSuccess?function(){}:e.onSuccess,onError:'undefined'==typeof e.onError?function(){}:e.onError,retries:'undefined'==typeof e.retries?5:e.retries,timeout:'undefined'==typeof e.timeout?500:e.timeout,status:'requestNotSent'},o='undefined'==typeof e.onError&&'undefined'==typeof e.onSuccess,r='undefined'==typeof e.params?[]:e.params,s=t();R[s]=i,i.callId=s,i.message=o?c(e.publicProcedureName,r):c(e.publicProcedureName,r,s),x(s)}}function k(e,t,i,a){var n={receivePingRequest:'rPR',getRegisteredProcedures:'gRP',ready:'r',config:'i'};if('undefined'==typeof a?v.push({a:new Date().getTime(),b:'',c:'uPM',h:'',e:'f3:uRpcC'}):v.push({a:new Date().getTime(),b:a.callId,c:a.logType||'req',h:n[a.publicProcedureName]?n[a.publicProcedureName]:a.publicProcedureName,e:a.calledAt}),'undefined'==typeof e||null===e)self.postMessage(r(t));else{if('undefined'!=typeof e.frames)return e.postMessage(r(t),i);e.postMessage(r(t))}}function x(e,t){self.setTimeout(function(){var a=R[e];if('undefined'!=typeof a&&!(t&&'pinging'!==a.status))if(-1>=a.retries)b(u(l(-4,'Application error.','Destination unavailable. '+a.timeout),null,e));else{if('requestSent'===a.status)return;if(0===a.retries||'available'===a.status){a.status='requestSent',a.retries=-1,R[e]=a;for(var n=0;n<a.destinationDomain.length;n++)a.calledAt='wSR:SR',k(a.destination,a.message,a.destinationDomain[n],a),self.setTimeout(function(){x(e)},a.timeout)}else{a.status='pinging',--a.retries;var i={destination:a.destination,publicProcedureName:'receivePingRequest',onSuccess:function(t){!0===t.returnValue&&'undefined'!=typeof R[e]&&'pinging'===R[e].status&&(R[e].status='available',x(e))},params:[a.publicProcedureName],retries:0,destinationDomain:a.destinationDomain};a.destinationDomain&&(i.destinationDomain=a.destinationDomain),y(i),R[e]=a,window.setTimeout(function(){R[e]&&'pinging'===R[e].status&&x(e,!0)},a.timeout/a.retries)}}},10)}function I(e,t,i,a){'addEventListener'in e?e.addEventListener(t,i,a):e.attachEvent('on'+t,i)}function A(e,t,i){return function(a){e({event:a,source:t,destinationType:i})}}function w(){var e=[];if('undefined'!=typeof window){e.push({context:window.top,type:'window'});for(var t,a=0;'undefined'!=typeof e[a];a++){t=e[a];for(var i=0;i<t.context.frames.length;i++)e.push({context:t.context.frames[i],type:'window'})}}else e.push({context:window,type:'workerParent'});return e}function _(){return U}function P(){var e=w(),t=_(),i=e.concat(t);return i}function T(){var e=[],t='undefined'==typeof window.frames?'':window.location.protocol+'//'+window.location.host+(''===window.location.port?'':':'+window.location.port);for(var i in L)if(i in C)continue;else e.push({publicProcedureName:L[i].publicProcedureName,acl:L[i].acl,origin:t});return e}if('undefined'==typeof JSON||'undefined'==typeof JSON.stringify||'undefined'==typeof JSON.parse)throw'pmrpc requires the JSON library';var v=[];if('undefined'==typeof window.postMessage&&'undefined'==typeof window.onconnect)throw'pmrpc requires the HTML5 cross-document messaging and worker APIs';var S='pmrpc.',N=function(e){if(window.sessionStorage){var t=e.publicProcedureName+'.'+S,i={procedure:e.publicProcedureName,status:e.status,description:e.message,namespace:e.namespace?e.namespace:S};sessionStorage.setItem(t,JSON.stringify(i))}else;},O=e(),L={},R={},C={};if('window'in window){var D=A(g,null,'window');I(window,'message',D,!1)}else if('onmessage'in window){var D=A(g,window,'worker');I(window,'message',D,!1)}else if('onconnect'in window){var E=function(t){var e=A(g,t.ports[0],'sharedWorker');I(t.ports[0],'message',e,!1),t.ports[0].start()};I(window,'connect',E,!1)}else throw'Pmrpc must be loaded within a browser window or web worker.';var F=window.Worker;window.nonPmrpcWorker=F;var q=window.SharedWorker;window.nonPmrpcSharedWorker=q;var U=[];return window.Worker=function(e){var t=new F(e);U.push({context:t,type:'worker'});var i=A(g,t,'worker');return I(t,'message',i,!1),t},window.SharedWorker=function(e,t){var i=new q(e,t);U.push({context:i,type:'sharedWorker'});var a=A(g,i.port,'sharedWorker');return I(i.port,'message',a,!1),i.postMessage=function(e,t){return i.port.postMessage(e,t)},i.port.start(),i},p({publicProcedureName:'receivePingRequest',procedure:function(e){return'undefined'!=typeof m(e)}}),p({publicProcedureName:'getRegisteredProcedures',procedure:T}),C={getRegisteredProcedures:null,receivePingRequest:null},{register:p,unregister:f,call:function(e){e.namespace&&i(e.namespace),y(e)},discover:function(e){function t(e,t){for(var a=0;a<e.length;a++)e[a].origin.match(new RegExp(o))&&e[a].publicProcedureName.match(new RegExp(r))&&s.push({publicProcedureName:e[a].publicProcedureName,destination:t,procedureACL:e[a].acl,destinationOrigin:e[a].origin})}var a=null;if('undefined'==typeof e.destination){a=P();for(var n=0;n<a.length;n++)a[n]=a[n].context}else a=e.destination;var o='undefined'==typeof e.originRegex?'(.*)':e.originRegex,r='undefined'==typeof e.nameRegex?'(.*)':e.nameRegex,i=a.length,s=[];this.call({destination:a,destinationDomain:'*',publicProcedureName:'getRegisteredProcedures',onSuccess:function(a){i--,t(a.returnValue,a.destination),0===i&&e.callback(s)},onError:function(){i--,0===i&&e.callback(s)}})},setNamespace:i,sessionLog:N,getMessageLog:function(){return v},getMessageStringLog:function(){var e={receivePingRequest:'rPR',getRegisteredProcedures:'gRP',ready:'r',config:'i',getConfig:'gC'},t=[],i=[];return v.forEach(function(a){i=[],Object.keys(a).forEach(function(t){var n=a[t];if('a'===t){var o=a[t]+'';n=o.substring(5)}else'b'===t?n=a[t].substring(0,8):'h'===t&&(n=e[n]?e[n]:n);i.push(t+':'+n)}),t.push(i.join(' '))}),t.join('|')}}},s=r,d=i(11),c=i(12);'format es6','use strict';i.d(t,'auth',function(){return b});var l={state:'authorize',authorizePath:'/auth/authorize/signin',codePath:'/auth/authorize/validate',enableFirstPartyOAuth:!1,code:void 0,oauthState:void 0,appleOAuth:{requestor:{}}},u=function(){l.enableFirstPartyOAuth=!1,l.code=void 0,l.oauthState=void 0,l.appleOAuth={requestor:{}}},p=function(e){for(var t=[],i=0;i<e.length;i++)t.push([e[i][0],e[i][1]]);return t},f={name:'aid-auth-widget',nameSpace:'pmrpc',path:'/auth/signin',initiatePath:'/signin/initiate',isFailedToLoadFirstPartyOAuth:!1,getUrlPath:function(e){return e.features&&e.features.useSignInInitiate?f.initiatePath:l.enableFirstPartyOAuth?'authorize'===l.state?l.authorizePath:'code'===l.state?l.codePath:f.path:f.path},urlParamTransform:function(e,t){var a=[],n={widgetDomain:!0,widgetKey:!0};if(l.enableFirstPartyOAuth){a.push(['frame_id',t.iframeId]);for(var o=0;o<e.length;o++)n[e[o][0]]||a.push([e[o][0],e[o][1]]),'iframeId'===e[o][0]&&'undefined'==typeof l.oauthState&&(t.appleOAuth.requestor.state=e[o][1],l.oauthState=e[o][1]);if(t.appleOAuth.requestor.id)a.push(['client_id',t.appleOAuth.requestor.id]);else throw new TypeError('requestor.id is either not provided or is not defined.');t.appleOAuth.requestor.scope&&a.push(['scope',t.appleOAuth.requestor.scope]),t.appleOAuth.requestor.teamId&&a.push(['team_id',t.appleOAuth.requestor.teamId]),t.appleOAuth.requestor.redirectURI&&a.push(['redirect_uri',t.appleOAuth.requestor.redirectURI]),t.appleOAuth.requestor.responseType&&a.push(['response_type',t.appleOAuth.requestor.responseType]),t.appleOAuth.requestor.responseMode&&a.push(['response_mode',t.appleOAuth.requestor.responseMode]),l.oauthState&&a.push(['state',l.oauthState]),'code'===l.state&&(a.push(['code',l.code]),'undefined'!=typeof t.alternateTokenCookie&&''!==t.alternateTokenCookie&&a.push(['altToken',t.alternateTokenCookie.toString()]))}else a=p(e),'undefined'!=typeof t.requestorAppId&&''!==t.requestorAppId&&a.push(['appId',t.requestorAppId]);return'undefined'!=typeof t.resetCRToken&&''!==t.resetCRToken&&a.push(['key',t.resetCRToken]),'undefined'!=typeof t.resetCRLang&&''!==t.resetCRLang&&a.push(['language',t.resetCRLang]),'undefined'!=typeof t.domainId&&''!==t.domainId&&a.push(['rv',t.domainId]),a}},m=new function(e){e.name=e.name||'widget-loader',e.nameSpace=e.nameSpace||'widgetLoader',e.frameLoadTimeout=e.frameLoadTimeout||60000,e.configTimeout=e.configTimeout||30000,e.path=e.path||'',e.urlTransform=e.urlTransform||function(e){return e},e.widgetWindowReference=void 0;var t,i,a,n=new s,r={},l=!1,u=!1,p=!1,f=!1,m=!1,g=[],h=['ready','config'],b=[],y={},k={lines:13,length:25,width:9,radius:20,scale:.25,corners:1,color:'#000',opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:'spinner',top:'50%',left:'50%',shadow:!1,hwaccel:!1,position:'absolute'},x=new d(k);n.context=self.name||'Parent',n||(n=new s),n.setNamespace(e.nameSpace);var I=function(e,t,i){e&&''!==e.trim()?e=e.trim().toUpperCase():void 0,'START_WITH'===e?(t&&'LITE'===t.toString().toUpperCase().trim()&&(k.color='#fff'),x.spin(document.getElementById(i))):'STOP'===e&&x.stop()},A=function(t){'undefined'==typeof t.returnUrl&&'undefined'!=typeof t.returnURL&&(t.returnUrl=t.returnURL);var i=S(t);if(i.result){r.config=t,N(r.config),('undefined'==typeof r.config.waitAnimation||''===r.config.waitAnimation.trim()||r.config.waitAnimation&&'FALSE'!==r.config.waitAnimation.toUpperCase().trim())&&I('START_WITH',r.config.theme,r.config.containerId),O(r.config,e.name),C(),D();var a=+t.frameLoadTimeout;e.frameLoadTimeout=!isNaN(a)&&e.frameLoadTimeout<a?a:e.frameLoadTimeout,m||w()}else if(t.callbacks&&t.callbacks.onAuthFailure){var n='';i.missingPaths.map(function(e){n+='\t '+e+'\t '}),t.callbacks.onAuthFailure({result:{code:'MISSING_MANDATORY_INIT_OPTIONS',message:'Missing mandatory initOptions: ['+n+'] \n Refer the documentation for more information. \n',data:{}}})}},w=function(){m=!1,t=setTimeout(function(){u||(u=!0,L(e.name),'function'==typeof r.config.loadFailed&&r.config.loadFailed({error:'timeout'}))},e.frameLoadTimeout)},_=function(e,t){if('undefined'!=typeof r.config&&r.config.serviceURL){a=o.getOriginFromUrl(r.config.serviceURL);var i,d=!!y[e];i=d?o.setupACL([window.location.origin,a]):o.setupACL(a),n||(n=new s),n.register({publicProcedureName:e,procedure:t,acl:i})}else g.push({__key__:e,__callback__:t})},P=function(t){return JSON.parse(t.replace(e.nameSpace+'.','')).method},T=function(){for(var e='auth-'+Math.random().toString(36).substr(2,8),t=1;3>=t;t++)e+='-'+Math.random().toString(36).substr(2,4);return e+='-'+Math.random().toString(36).substr(2,8),e},v=function(t){var a,n=t.serviceURL,o=e.path,s=[],d=[],c='';if(e.getUrlPath&&(o=e.getUrlPath(t)),n+=o,c=n,n=n+'?widgetKey='+t.serviceKey,s.push(['widgetKey',t.serviceKey]),t.locale&&(n+='&language='+t.locale,s.push(['language',t.locale])),t.features&&t.features.useEyebrowTextbox&&(n+='&useEyebrowTextbox='+t.features.useEyebrowTextbox,s.push(['useEyebrowTextbox',t.features.useEyebrowTextbox])),t.skVersion&&!isNaN(t.skVersion)&&(n+='&skVersion='+t.skVersion,s.push(['skVersion',t.skVersion])),'undefined'!=typeof t.devAppDomain&&''!==t.devAppDomain&&(n+='&widgetDomain='+t.devAppDomain,s.push(['widgetDomain',t.devAppDomain])),a='undefined'==typeof t.iframeId?T():t.iframeId,r.iframeId=a,t.iframeId=a,n+='&iframeId='+a,s.push(['iframeId',a]),e.urlParamTransform){s=e.urlParamTransform(s,t);for(var l=0;l<s.length;l++)d.push(s[l].join('='));r.srcUrl=c+'?'+d.join('&')}else r.srcUrl=e.urlTransform(n,t);return r.srcUrl},S=function(e){var t={result:!1},i=[],a=function(e,t){var a=!0;return t.map(function(t){c(e,t)||(a=!1,i.push(t))}),a};return t.result=a(e,['containerId','serviceKey','serviceURL','callbacks.onAuthSuccess']),t.result&&(e.context&&'TEST_IDP'===e.context.trim().toUpperCase()&&(t.result=a(e,['context','domainName','gsWebToken','alternateDSID','orgId','entityId'])),e.context&&'MICROSOFT_OBO'===e.context.trim().toUpperCase()&&(t.result=a(e,['context','gsWebToken','orgId','alternateDSID','entityId']))),t.result||(t.missingPaths=i),t},N=function(e){if(''!==e.locale&&e.locale||void 0,('undefined'==typeof r.config.waitAnimation||''===r.config.waitAnimation.trim()||r.config.waitAnimation&&'FALSE'!==r.config.waitAnimation.toUpperCase().trim())&&void 0,e.features||void 0,''===e.serviceKey||!e.serviceKey)throw new TypeError('serviceKey is either not provided or is not defined.');else if(''===e.serviceURL||!e.serviceURL)throw new TypeError('serviceURL is either not provided or is not defined.');else if(''===e.containerId||!e.containerId)throw new TypeError('containerId is either not provided or is not defined.');else if(!e.callbacks||!e.callbacks.completed||'function'!=typeof e.callbacks.completed);else if(!e.callbacks||!e.callbacks.failed||'function'!=typeof e.callbacks.failed);},O=function(t,i){var a=document.createElement('iframe');a.src=v(t),a.width=t.width||'100%',a.height=t.height||'100%',a.id=i+'-iFrame',a.name=i,a.scrolling='no',a.frameBorder='0',a.setAttribute('role','none'),window.document.getElementById(t.containerId).appendChild(a),e.widgetWindowReference=window.frames[i]},L=function(e){var t=document.getElementById(e+'-iFrame');null!==t&&'IFRAME'===t.nodeName&&t.parentNode&&t.parentNode.removeChild(t)},R=function(){n.call({destination:e.widgetWindowReference,publicProcedureName:'teardownWidget',onSuccess:function(){L(e.name),clearTimeout(t),clearTimeout(i),r.config.callbacks.onAuthTeardown()},onError:function(){L(e.name),clearTimeout(t),clearTimeout(i),r.config.callbacks.onAuthTeardown()},retries:3})},C=function(){_('getConfig',function(a){return b.push('getConfig'),l=!0,clearTimeout(t),'function'==typeof r.config.callbacks.getConfig&&r.config.callbacks.getConfig(a),I('STOP'),b.indexOf(h[0])>b.indexOf(h[1])?i=setTimeout(function(){p||f||(f=!0,L(e.name),'function'==typeof r.config.callbacks.failed&&r.config.callbacks.failed(a))},r.config.configTimeout):void 0,r.config}),_('widgetFailedToLoad',function(i){b.push('widgetFailedToLoad'),u||(u=!0,clearTimeout(t),L(e.name),'function'==typeof r.config.callbacks.loadFailed&&r.config.callbacks.loadFailed(i))}),_('ready',function(e){b.push('ready'),p=!0,clearTimeout(i),'function'==typeof r.config.callbacks.ready&&r.config.callbacks.ready(e)}),_('configFailed',function(t){b.push('configFailed'),f||(f=!0,clearTimeout(i),L(e.name),'function'==typeof r.config.callbacks.failed&&r.config.callbacks.failed(t))}),_('failed',function(e){b.push('failed'),'function'==typeof r.config.callbacks.failed&&r.config.callbacks.failed(e)}),_('completed',function(e){b.push('completed'),'function'==typeof r.config.callbacks.completed&&r.config.callbacks.completed(e)}),_('exit',function(e){b.push('exit'),'function'==typeof r.config.callbacks.exit&&r.config.callbacks.exit(e)}),_('error',function(e){b.push('error'),'function'==typeof r.config.callbacks.error&&r.config.callbacks.error(e)}),_('log',function(e){b.push('log'),'function'==typeof r.config.callbacks.log&&r.config.callbacks.log(e)})},D=function(){for(var e in g)g.hasOwnProperty(e)&&_(g[e].__key__,g[e].__callback__);E()},E=function(){window.addEventListener('message',function(t){if('undefined'!=typeof t&&'undefined'!=typeof t.data&&'string'==typeof t.data&&-1!==t.data.indexOf(e.nameSpace)){var i=P(t.data),n=t.origin||t.originalEvent.origin;for(var o in g)g.hasOwnProperty(o)&&i&&i.toLowerCase().trim()===g[o].__key__.toLowerCase().trim()&&n===a&&b.push(g[o].__key__)}},!1)};return r.load=A,r.teardown=R,r.addListener=_,r.getMessageStringLog=n.getMessageStringLog,r.buildIFrame=O,r.clearTimeout=function(){clearTimeout(t),m=!0},r.setLoadTimeout=w,r.reLoadIFrame=function(){L(e.name),O(r.config,e.name),w()},r.addAliasToListener=function(t,i,o){if('undefined'==typeof i||''===i.trim())throw new Error('[listener] is required.');if('undefined'==typeof t||''===t.trim())throw new Error('[alias] is required.');if(i.toLowerCase().trim()===t.toLowerCase().trim())throw new Error('[alias] [listener] names cannot be same.');if('function'!=typeof o)throw new Error('[callback] is required and should be a function.');if(!y[i])y[i]=t;else throw new Error('');window.addEventListener('message',function(o){if('undefined'!=typeof o&&'undefined'!=typeof o.data&&'string'==typeof o.data&&-1!==o.data.indexOf(e.nameSpace)){var r=P(o.data),s=o.origin||o.originalEvent.origin;r&&r.toLowerCase().trim()===t.toLowerCase().trim()&&s===a&&n.call({destination:window,destinationDomain:window.location.origin,publicProcedureName:i,namespace:e.nameSpace,onSuccess:function(){},onError:function(){}})}},!1),_(t,o)},r.destroyIFrame=L,r}(f);m.addListener('complete',function(e){'function'==typeof m.config.callbacks.onAuthSuccess&&m.config.callbacks.onAuthSuccess(e,{iframeId:m.iframeId})});var g=function(e){if(!e)throw new TypeError('Invalid url',e);var t=document.implementation.createHTMLDocument(''),i=t.createElement('a');if(i.href=e,t.body.appendChild(i),':'===i.protocol||!/:/.test(i.href))throw new TypeError('Invalid URL');return i.protocol+'//'+i.host};m.addListener('ready',function(e){'function'==typeof m.config.callbacks.onAuthReady&&m.config.callbacks.onAuthReady(e,{iframeId:m.iframeId});var t=document.getElementById(f.name+'-iFrame');null!==t&&'undefined'!=typeof e.iframeTitle&&''!==e.iframeTitle&&(t.title=e.iframeTitle)}),m.addListener('authFailedToLoad',function(e){var t=m.getMessageStringLog(),i=m.iframeId;'function'==typeof m.config.callbacks.onAuthFailure&&m.config.callbacks.onAuthFailure(e,{logMessage:t,iframeId:i})}),m.addListener('passwordAuthDone',function(e,t){'function'==typeof m.config.callbacks.onPasswordAuthDone&&m.config.callbacks.onPasswordAuthDone(e,t,{iframeId:m.iframeId})}),m.addListener('authError',function(e,t){'function'==typeof m.config.callbacks.onAuthError&&m.config.callbacks.onAuthError(e,t)}),m.addListener('repairDidStart',function(e){'function'==typeof m.config.callbacks.onRepairStart&&m.config.callbacks.onRepairStart(e,{iframeId:m.iframeId})}),m.addListener('authDidCancel',function(e){'function'==typeof m.config.callbacks.onAuthCancel&&m.config.callbacks.onAuthCancel(e,{iframeId:m.iframeId})}),m.addListener('authTeardown',function(e){'function'==typeof m.config.callbacks.onAuthTeardown&&m.config.callbacks.onAuthTeardown(e,{iframeId:m.iframeId})}),m.addListener('authWidgetDidChangeFlow',function(e){'function'==typeof m.config.callbacks.onAuthWidgetDidChangeFlow&&m.config.callbacks.onAuthWidgetDidChangeFlow(e,{iframeId:m.iframeId})}),m.addListener('authWidgetWillChangeFlow',function(e){'function'==typeof m.config.callbacks.onAuthWidgetWillChangeFlow&&m.config.callbacks.onAuthWidgetWillChangeFlow(e,{iframeId:m.iframeId})}),m.addAliasToListener('config','getConfig',function(){return{data:m.config}}),window.addEventListener('message',function(e){var t,i,a,n,o=e.origin||e.originalEvent.origin;if(m.config&&m.config.features&&m.config.serviceURL&&m.config.features.enableFirstPartyOAuth&&(n=g(m.config.serviceURL),o===n))if('SOAuthorizationDidStart'===e.data)m.clearTimeout(),'function'==typeof m.config.callbacks.onNativeTakeOverDidStart&&m.config.callbacks.onNativeTakeOverDidStart({iframeId:m.iframeId});else if('SOAuthorizationDidCancel'===e.data)'function'==typeof m.config.callbacks.onNativeTakeOverDidCancel&&m.config.callbacks.onNativeTakeOverDidCancel({iframeId:m.iframeId}),m.setLoadTimeout();else if(e.data&&'AppSSOTakeoverDidComplete'===e.data.event){if(m.clearTimeout(),'function'==typeof m.config.callbacks.onNativeTakeOverDidComplete&&m.config.callbacks.onNativeTakeOverDidComplete({iframeId:m.iframeId}),'undefined'==typeof e.data.authorization||'undefined'==typeof e.data.authorization.grant_code)return l.state='fail','function'==typeof m.config.callbacks.onNativeTakeOverError&&m.config.callbacks.onNativeTakeOverError({code:'MISSING_DATA'},{iframeId:m.iframeId}),void m.reLoadIFrame();try{t=atob(e.data.authorization.grant_code)}catch(i){t=e.data.authorization.grant_code}if(l.code=t,e.data.authorization&&(i=e.data.authorization.state),m.config.features&&m.config.features.enableOIDCGrantCode)m.config.callbacks.onAuthSuccess({grantCode:t,state:i},{iframeId:m.iframeId});else{var r={serviceURL:m.config.serviceURL,serviceKey:m.config.serviceKey,code:t,appleOAuth:{requestor:l.appleOAuth.requestor},width:'0',height:'0',iframeId:m.iframeId,containerId:m.config.containerId,state:m.config.state};'undefined'!=typeof m.config.alternateTokenCookie&&''!==m.alternateTokenCookie&&(r.alternateTokenCookie=m.config.alternateTokenCookie),l.state='code',m.buildIFrame(r,'widget-bridge'),a=setTimeout(function(){l.state='fail',clearTimeout(a),'function'==typeof m.config.callbacks.onNativeTakeOverError&&m.config.callbacks.onNativeTakeOverError({code:'LOAD_TIMEOUT'},{iframeId:m.iframeId}),m.destroyIFrame('widget-bridge'),m.reLoadIFrame()},60000)}}else if(e.data&&e.data.event&&'WidgetBridgeComplete'===e.data.event){var s={};i=e.data.state,clearTimeout(a),i&&(s.state=i),m.config.callbacks.onAuthSuccess(s,{iframeId:m.iframeId})}else e.data&&e.data.event&&'WidgetBridgeFailed'===e.data.event&&(l.state='fail',clearTimeout(a),'function'==typeof m.config.callbacks.onNativeTakeOverError&&m.config.callbacks.onNativeTakeOverError({code:'FAIL_TO_VERIFY_CREDENTIALS'},{iframeId:m.iframeId}),m.destroyIFrame('widget-bridge'),m.reLoadIFrame())});var h=function(e){e.appleOAuth={requestor:{id:e.serviceKey,redirectURI:window.location.origin,responseMode:'web_message',responseType:'code'}},'undefined'!=typeof e.state&&(e.appleOAuth.requestor.state=e.state,l.oauthState=e.appleOAuth.requestor.state),'undefined'!=typeof e.devAppDomain&&''!==e.devAppDomain&&(e.appleOAuth.requestor.redirectURI=e.devAppDomain),l.appleOAuth.requestor=e.appleOAuth.requestor};window.AppleID=window.AppleID||{},window.AppleID.service=window.AppleID.service||{},window.AppleID.service.auth=window.AppleID.service.auth||{},window.AppleID.service.auth.init||(window.AppleID.service.auth.init=function(e){u(),e.features&&e.features.enableFirstPartyOAuth&&(l.enableFirstPartyOAuth=!0,h(e)),m.load(e)}),window.AppleID.service.auth.teardown=window.AppleID.service.auth.teardown||m.teardown;var b={init:m.load,teardown:m.teardown},y=t['default']=m.load}]);